
import React, { useState, useContext } from "react";
import styles from "./ChatFooter.module.css";
import { UserContext } from "../../App";
import Photodata from "./Photodata";

function ChatFooter({ click, setclick, setphototype }) {
  const { selectid, userid, socket, setmsg } = useContext(UserContext);
  const [value, setvalue] = useState("");
  const [sticker, setsticker] = useState(false);
  const [photo, setphoto] = useState(null);
  const [selectfile, setselectfile] = useState(null);
  const stickers = [
    "ðŸ˜€",
    "ðŸ˜‚",
    "ðŸ˜",
    "ðŸ¥º",
    "ðŸ˜Ž",
    "ðŸ”¥",
    "ðŸš€",
    "ðŸ’–",
    "ðŸŽ‰",
    "ðŸ‘",
    "ðŸ‘€",
    "ðŸ’¡",
    "ðŸ¤”",
    "ðŸ˜‡",
    "ðŸ˜­",
    "ðŸ¥³",
    "ðŸ˜¡",
    "ðŸ¤¯",
    "ðŸ¤©",
    "ðŸ’ª",
    "ðŸ™Œ",
    "âœ¨",
    "ðŸ«¡",
    "ðŸ¤·â€â™‚ï¸",
    "ðŸ˜´",
    "ðŸ‘¨â€ðŸ’»",
    "ðŸ“±",
    "ðŸ’»",
    "ðŸ–¥ï¸",
    "ðŸ–±ï¸",
    "ðŸŽ®",
    "ðŸŽ§",
    "ðŸŽ¸",
    "ðŸŽ¯",
    "ðŸš´â€â™‚ï¸",
    "ðŸ†",
    "âš½",
    "ðŸ",
    "ðŸ€",
    "ðŸ¥Š",
    "ðŸŽ±",
    "ðŸ•",
    "ðŸ”",
    "ðŸŸ",
    "ðŸŒ­",
    "ðŸ©",
    "â˜•",
    "ðŸº",
    "ðŸŒ",
    "ðŸª",
    "ðŸŒ™",
    "âš¡",
    "â˜€ï¸",
    "ðŸŒ§ï¸",
    "â„ï¸",
    "ðŸ”¥",
    "ðŸ’€",
    "ðŸ‘»",
    "ðŸ¤–",
    "ðŸ¦„",
    "ðŸ¶",
    "ðŸ±",
    "ðŸ¼",
    "ðŸ¦Š",
    "ðŸ",
    "ðŸ‰",
    "ðŸ¦",
    "ðŸ ",
    "ðŸ¬",
    "ðŸ¦–",
    "ðŸŒ¿",
    "ðŸŒ´",
    "ðŸŒµ",
    "ðŸŒ»",
    "ðŸŒ¹",
    "ðŸ›¸",
    "ðŸš—",
    "ðŸš€",
    "âœˆï¸",
    "ðŸ›³ï¸",
    "â³",
    "â°",
    "ðŸ“…",
    "ðŸ’Ž",
    "ðŸ’°",
    "ðŸ›’",
    "ðŸ”‘",
    "ðŸ“",
    "ðŸ”—",
    "ðŸ“ž",
    "ðŸ’¬",
    "ðŸ“§",
    "âœï¸",
    "ðŸ“",
    "ðŸ“š",
    "ðŸŽµ",
    "ðŸŽ¥",
    "ðŸ“¸",
    "ðŸ”Š",
    "ðŸ› ï¸",
    "âš™ï¸",
    "ðŸ–Šï¸",
    "ðŸ”",
    "ðŸ›¡ï¸",
    "âš–ï¸",
    "ðŸš¦",
    "ðŸš",
    "ðŸ°",
    "ðŸ—¼",
    "ðŸ—¿",
    "ðŸ•ï¸",
    "â›°ï¸",
    "ðŸŒ",
    "ðŸŽ¡",
    "ðŸï¸",
    "ðŸ¤“",
    "ðŸ˜œ",
    "ðŸ¥¶",
    "ðŸ¤¡",
    "ðŸ‘½",
    "ðŸ¦¹â€â™‚ï¸",
    "ðŸ¦¸â€â™€ï¸",
    "ðŸ§™â€â™‚ï¸",
    "ðŸ§›â€â™‚ï¸",
    "ðŸ§žâ€â™‚ï¸",
    "ðŸ§â€â™€ï¸",
    "ðŸ§Ÿâ€â™‚ï¸",
    "ðŸ’ƒ",
    "ðŸ•º",
    "ðŸš¶â€â™‚ï¸",
    "ðŸƒâ€â™€ï¸",
    "ðŸ¤¸â€â™‚ï¸",
    "ðŸ„â€â™‚ï¸",
    "ðŸš´â€â™€ï¸",
    "ðŸ‡",
    "ðŸ›¹",
    "ðŸŽ­",
    "ðŸŽ¨",
    "ðŸŽ·",
    "ðŸ¥",
    "ðŸ“¯",
    "ðŸŽ»",
    "ðŸŽ¤",
    "ðŸ•¹ï¸",
    "ðŸŽ²",
    "ðŸƒ",
    "â™Ÿï¸",
    "ðŸŽ°",
    "ðŸŽ®",
    "ðŸ§©",
    "ðŸ›ï¸",
    "ðŸš½",
    "ðŸ›€",
    "ðŸš¿",
    "ðŸ›‹ï¸",
    "ðŸšª",
    "ðŸ›Žï¸",
    "ðŸ–¼ï¸",
    "ðŸ§¸",
    "ðŸª",
    "ðŸª€",
    "ðŸŽˆ",
    "ðŸŽ",
    "ðŸŽ‚",
    "ðŸ°",
    "ðŸ§",
    "ðŸ¥§",
    "ðŸ¦",
    "ðŸ¨",
    "ðŸ«",
    "ðŸ¬",
    "ðŸ­",
    "ðŸª",
    "ðŸ¼",
    "ðŸ¥¤",
    "ðŸµ",
    "ðŸ¹",
    "ðŸ¥‚",
    "ðŸ¾",
    "ðŸ·",
    "ðŸ»",
    "ðŸ¶",
    "ðŸ¥¢",
    "ðŸ½ï¸",
    "ðŸ¥„",
    "ðŸ´",
    "ðŸ”ª",
    "ðŸ—¡ï¸",
    "âš”ï¸",
    "ðŸ¹",
    "ðŸ›¡ï¸",
    "ðŸš¬",
    "ðŸ§¨",
    "ðŸŽ‡",
    "ðŸŽ†",
    "ðŸ•¯ï¸",
    "ðŸ’¡",
    "ðŸ”¦",
    "ðŸ®",
    "ðŸ›¢ï¸",
    "â›½",
    "ðŸš",
    "ðŸš¦",
    "ðŸš¥",
    "ðŸš§",
    "âš ï¸",
    "ðŸš¨",
    "ðŸš”",
    "ðŸš’",
    "ðŸš‘",
    "ðŸš“",
    "ðŸ›‘",
    "ðŸ’ˆ",
    "ðŸ§",
    "ðŸš¹",
    "ðŸšº",
    "ðŸš»",
    "ðŸš¼",
    "ðŸš¾",
    "ðŸ›‚",
    "ðŸ›ƒ",
    "ðŸ›„",
    "ðŸ›…",
    "ðŸ¤¯",
    "ðŸ¥µ",
    "ðŸ¥´",
    "ðŸ¤¢",
    "ðŸ¤§",
    "ðŸ¤ ",
    "ðŸ‘º",
    "ðŸ‘¹",
    "ðŸŽƒ",
    "ðŸ¦„",
    "ðŸ¸",
    "ðŸ’",
    "ðŸ¦‰",
    "ðŸ¦…",
    "ðŸ³",
    "ðŸ¦ˆ",
    "ðŸ¦‚",
    "ðŸ¦–",
    "ðŸŒ‹",
    "ðŸœï¸",
    "ðŸ•ï¸",
    "ðŸ—ï¸",
    "ðŸ›ï¸",
    "ðŸ—¿",
    "ðŸšï¸",
    "ðŸ˜ï¸",
    "ðŸ ",
    "ðŸ©",
    "ðŸ¥",
    "ðŸ£",
    "ðŸ¬",
    "ðŸª",
    "ðŸ¤",
    "â›©ï¸",
    "ðŸ•Œ",
    "ðŸ•",
    "â›ª",
    "ðŸ›•",
    "ðŸ›ï¸",
    "ðŸŒƒ",
    "ðŸŒ†",
    "ðŸŒ‰",
    "ðŸŒ",
    "ðŸŒŠ",
    "ðŸï¸",
    "ðŸŒ„",
    "ðŸžï¸",
    "ðŸŒ²",
    "ðŸŽ„",
    "ðŸŒ´",
    "ðŸŒ»",
    "ðŸŒº",
    "ðŸŒ·",
    "ðŸ",
    "ðŸ„",
    "ðŸª´",
    "ðŸŒ¾",
    "ðŸ’",
    "ðŸŽ",
    "ðŸ‰",
    "ðŸ‡",
    "ðŸ“",
    "ðŸ¥",
    "ðŸ",
    "ðŸ¥‘",
    "ðŸŒ°",
    "ðŸ¥•",
    "ðŸŒ¶ï¸",
    "ðŸž",
    "ðŸ§€",
    "ðŸ¥“",
    "ðŸ–",
    "ðŸ—",
    "ðŸ¥˜",
    "ðŸœ",
    "ðŸ£",
    "ðŸ¥®",
    "ðŸ¢",
    "ðŸ¡",
    "ðŸ¥",
    "ðŸ¥ ",
    "ðŸ¥¡",
    "ðŸš",
    "ðŸ›",
    "ðŸ¥—",
    "ðŸ°",
    "ðŸ®",
    "ðŸŽ‚",
    "ðŸ¼",
    "ðŸ¥ƒ",
    "ðŸ¾",
    "ðŸ¹",
    "ðŸš•",
    "ðŸšŽ",
    "ðŸš",
    "ðŸš€",
    "ðŸ›¶",
    "ðŸš¤",
    "ðŸ›¸",
    "âœˆï¸",
    "ðŸš",
    "ðŸš‚",
    "ðŸš¢",
    "âš“",
    "ðŸš¦",
    "ðŸ›‘",
    "ðŸ—ºï¸",
    "ðŸ§³",
    "ðŸŽ¢",
    "ðŸŽ¡",
    "ðŸŽ ",
    "ðŸŸï¸",
    "ðŸŽ­",
    "ðŸŽ¬",
    "ðŸŽ¤",
    "ðŸŽ¹",
    "ðŸŽ»",
    "ðŸ¥",
    "ðŸŽ®",
    "ðŸŽ²",
    "ðŸƒ",
    "â™ ï¸",
    "â™£ï¸",
    "â™¥ï¸",
    "â™¦ï¸",
    "ðŸŽ°",
    "ðŸ€„",
    "ðŸ§©",
    "ðŸŽ´",
    "ðŸ”®",
    "ðŸ§¿",
    "ðŸŽ­",
    "ðŸ–¼ï¸",
    "ðŸŽ¨",
    "ðŸ§µ",
    "ðŸ§¶",
    "âœ‚ï¸",
    "ðŸª¡",
    "ðŸª¢",
    "ðŸ›ï¸",
    "ðŸŽ½",
    "ðŸ‘”",
    "ðŸ‘—",
    "ðŸ‘ ",
    "ðŸ‘ž",
    "ðŸ¥¿",
    "ðŸ§¦",
    "ðŸ©²",
    "ðŸ©±",
    "ðŸ‘™",
    "ðŸ‘œ",
    "ðŸŽ’",
    "ðŸ’¼",
    "ðŸ‘›",
    "ðŸ•¶ï¸",
    "ðŸ¥½",
    "ðŸŽ“",
    "ðŸ§¢",
    "ðŸ‘‘",
    "ðŸ“¿",
    "ðŸ’",
    "ðŸ’Ž",
    "ðŸšª",
    "ðŸ›ï¸",
    "ðŸ›‹ï¸",
    "ðŸš¿",
    "ðŸ›",
    "ðŸš½",
    "ðŸª‘",
    "ðŸ›Žï¸",
    "ðŸ¤©",
    "ðŸ¥³",
    "ðŸ˜¼",
    "ðŸ™€",
    "ðŸ¦Š",
    "ðŸ¯",
    "ðŸ¦",
    "ðŸµ",
    "ðŸº",
    "ðŸ¦…",
    "ðŸŠ",
    "ðŸ¦“",
    "ðŸ¦’",
    "ðŸ¦”",
    "ðŸŒ",
    "ðŸ¦•",
    "ðŸ¦‘",
    "ðŸ¦ž",
    "ðŸ¦€",
    "ðŸš",
    "ðŸ¦†",
    "ðŸ¦",
    "ðŸ“",
    "ðŸ¦š",
    "ðŸ‰",
    "ðŸŒŽ",
    "ðŸª",
    "â˜„ï¸",
    "ðŸŒ ",
    "ðŸŽ‡",
    "ðŸŽ†",
    "ðŸŒ¦ï¸",
    "ðŸŒªï¸",
    "â›ˆï¸",
    "â„ï¸",
    "â˜ƒï¸",
    "ðŸŒ€",
    "ðŸŒŠ",
    "ðŸŽ‘",
    "ðŸ¯",
    "ðŸ°",
    "ðŸ›¤ï¸",
    "ðŸ—¼",
    "â›²",
    "ðŸ›•",
    "ðŸŽ¢",
    "ðŸ›¹",
    "â›·ï¸",
    "ðŸ„",
    "ðŸŠ",
    "ðŸš´",
    "ðŸš£",
    "ðŸ¤¹",
    "ðŸ•º",
    "ðŸ©°",
    "ðŸŽ­",
    "ðŸŽ·",
    "ðŸŽº",
    "ðŸ¥",
    "ðŸŽ»",
    "ðŸŽ¸",
    "ðŸŽ®",
    "ðŸ•¹ï¸",
    "ðŸŽ²",
    "ðŸ“",
    "ðŸ¥Š",
    "ðŸ€",
    "âš¾",
    "ðŸ¥Ž",
    "ðŸˆ",
    "ðŸ‰",
    "ðŸŽ¯",
    "ðŸŽ³",
    "ðŸ†",
    "ðŸ¥‡",
    "ðŸ¥ˆ",
    "ðŸ¥‰",
    "ðŸ›’",
    "ðŸ›ï¸",
    "ðŸŽ",
    "ðŸ’Œ",
    "ðŸ“¦",
    "ðŸ—³ï¸",
    "ðŸ”‘",
    "ðŸ›¡ï¸",
    "âš”ï¸",
    "ðŸ”ª",
    "ðŸ©¸",
    "ðŸš¬",
    "ðŸš“",
    "ðŸš’",
    "ðŸš‘",
    "ðŸšœ",
    "ðŸš›",
    "ðŸš‡",
    "ðŸšŠ",
    "ðŸš¢",
    "ðŸ›³ï¸",
    "âœˆï¸",
    "ðŸš€",
    "ðŸ›¸",
    "ðŸ›°ï¸",
    "ðŸ› ï¸",
    "âš’ï¸",
    "ðŸ›ï¸",
    "ðŸš½",
    "ðŸš¿",
    "ðŸ§´",
    "ðŸª¥",
    "ðŸ©»",
    "ðŸ©º",
    "ðŸ’‰",
    "ðŸ’Š",
    "ðŸ§¬",
    "ðŸ¦ ",
    "ðŸ§«",
    "ðŸ§ª",
    "ðŸŒ¡ï¸",
    "ðŸº",
    "ðŸ—¿",
    "ðŸ›Žï¸",
    "ðŸ“¬",
    "ðŸ“®",
    "ðŸ“œ",
    "ðŸ–¼ï¸",
    "ðŸ”®",
    "ðŸ“–",
    "ðŸ§¾",
    "ðŸ’°",
    "ðŸª™",
    "ðŸ’³",
    "ðŸªž",
    "ðŸ”¦",
    "ðŸ•¯ï¸",
    "ðŸª”",
    "ðŸ’¡",
    "ðŸ“¡",
    "ðŸ“º",
    "ðŸ“»",
    "ðŸ“±",
    "ðŸ’»",
    "ðŸ–¥ï¸",
    "âŒ¨ï¸",
    "ðŸ–±ï¸",
    "ðŸŽ¥",
    "ðŸŽ™ï¸",
    "ðŸ“½ï¸",
    "ðŸ“¸",
    "ðŸ”",
    "ðŸ”­",
    "ðŸ•°ï¸",
    "âŒ›",
    "â³",
  ];

  const sendmessage = async () => {
    if (!value.trim()) return;
    const messageData = {
      sender: userid,
      receiver: selectid,
      text: value,
      file: null,
      createdAt: new Date().toISOString(),
    };
    socket.emit("sendMessage", messageData);
    setclick(!click);

    setvalue("");
    setsticker(false);
    setphoto(null);
  };

  function changedata(e) {
    setvalue(e.target.value);
  }

  async function addphoto(e) {
    const file = e.target.files[0];
    if (!file) {
      return;
    }
    setselectfile(file);
    const reader = new FileReader();
    reader.onload = function (e) {
      setphoto(e.target.result);
    };
    reader.readAsDataURL(file);
  }

  return (
    <div className={styles.bddadiv}>
      <div className={styles.plus}>
        <label htmlFor="data">
          <svg
            onClick={() => {
              setphoto(null);
            }}
            xmlns="http://www.w3.org/2000/svg"
            height="40px"
            viewBox="0 -960 960 960"
            width="40px"
            fill="#EFEFEF"
          >
            <path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z" />
          </svg>
        </label>
        <input
          type="file"
          id="data"
          name="filehai"
          onChange={addphoto}
          style={{ display: "none" }}
        />
      </div>
      {photo != null ? (
        <Photodata
          photo={photo}
          file={selectfile}
          setphoto={setphoto}
          setclick={setclick}
          setphototype={setphototype}
        />
      ) : (
        <></>
      )}
      <div className={styles.input}>
        <div
          className={styles.sticker}
          onClick={() => {
            setsticker(!sticker);
          }}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="#EFEFEF"
          >
            <path d="M620-40q-104 0-183.5-62T331-260q45 2 89-9t84-31h164q1-11 1.5-21.5t.5-21.5q0-9-.5-18.5T668-380h-59q16-18 29.5-38t24.5-42h141q-20-30-48-52.5T693-547q5-20 6.5-41t.5-41q96 26 158 105.5T920-340q0 125-87.5 212.5T620-40Zm-95-102q-7-20-12.5-39t-9.5-39h-67q17 25 39.5 45t49.5 33Zm95 14q12-22 20.5-45t14.5-47h-70q6 24 15 47t20 45Zm95-14q27-13 49.5-33t39.5-45h-67q-5 20-10 39t-12 39Zm33-158h88q2-10 3-19.5t1-20.5q0-11-1-20.5t-3-19.5h-88q1 9 1.5 18.5t.5 18.5q0 11-.5 21.5T748-300Zm-408-20q-125 0-212.5-87.5T40-620q0-125 87.5-212.5T340-920q125 0 212.5 87.5T640-620q0 125-87.5 212.5T340-320Zm0-80q91 0 155.5-64.5T560-620q0-91-64.5-155.5T340-840q-91 0-155.5 64.5T120-620q0 91 64.5 155.5T340-400ZM240-640q17 0 28.5-11.5T280-680q0-17-11.5-28.5T240-720q-17 0-28.5 11.5T200-680q0 17 11.5 28.5T240-640Zm100 176q48 0 85.5-27t54.5-69H200q17 42 54.5 69t85.5 27Zm100-176q17 0 28.5-11.5T480-680q0-17-11.5-28.5T440-720q-17 0-28.5 11.5T400-680q0 17 11.5 28.5T440-640Zm-100 20Z" />
          </svg>
        </div>
        <input
          type="text"
          placeholder="Type a message"
          value={value}
          onChange={(e) => {
            changedata(e);
          }}
          onFocus={() => {
            setsticker((pre) => {
              false;
            });
          }}
        />
      </div>
      {sticker && (
        <ul className={styles.stickerdata}>
          {stickers.map((emoji, index) => (
            <li
              key={index}
              className={styles.lists}
              onClick={() => {
                setvalue(value + emoji);
              }}
            >
              {emoji}
            </li>
          ))}
        </ul>
      )}
      <button
        className={styles.mic}
        onClick={() => {
          sendmessage();
        }}
      >
       

        <svg
          className={styles.send}
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          fill="#EFEFEF"
        >
          <path d="M120-160v-240l320-80-320-80v-240l760 320-760 320Z" />
        </svg>
      </button>
    </div>
  );
}
export default ChatFooter;

